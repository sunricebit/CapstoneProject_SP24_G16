@{
    Layout = "~/Views/Shared/_TournamentLayout.cshtml";
}

<div class="container-full">
    <div class="match-list">
        <div class="round-name">Vòng 1</div>
        <div class="table-overflow">
            <table class="round-table">
                <tr>
                    <th class="text-center">#</th>
                    <th>Bàn</th>
                    <th class="text-center">Trận</th>
                    <th colspan="7" class="text-center">Kết quả</th>
                    <th class="text-center">Chạm</th>
                    <th class="text-center">Mã trận</th>
                    <th class="text-center">Thắng</th>
                    <th class="text-center">Thua</th>
                    <th class="text-center">Thời gian</th>
                    <th class="text-center">Trạng thái</th>
                    <th class="text-center">Hành động</th>
                </tr>
                <!-- class isPlaying đổi màu row -->
                <tr class="isPlaying">
                    <td class="match-number">1</td>
                    <td class="match-table">Bàn 1</td>
                    <td class="match-race">2</td>
                    <td class="match-player justify-content-end">
                        <span class="m-0">Nam Vũ</span>
                    </td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-score text-center">5</td>
                    <td class="match-vs text-center">vs.</td>
                    <td class="match-score text-center">5</td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-player">
                        <span>Vũ Đoàn Nam Thu</span>
                    </td>
                    <td class="match-race">7</td>
                    <td class="match-race">W1-1</td>
                    <td class="match-race">#17</td>
                    <td class="match-race">#32</td>
                    <td class="match-time">
                        <div>11:00 - 12:00</div>
                        <div>22/02/2024</div>
                    </td>
                    <td class="match-status">
                        Đang chơi
                    </td>
                    <td class="match-status">
                        <button class="edit-btn">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
                <!-- class isFinish đổi màu row -->
                <tr class="isFinish">
                    <td class="match-number">1</td>
                    <td class="match-table">Bàn 1</td>
                    <td class="match-race">2</td>
                    <td class="match-player justify-content-end">
                        <span class="m-0">Nam Vũ</span>
                    </td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-score text-center">5</td>
                    <td class="match-vs text-center">vs.</td>
                    <td class="match-score text-center">5</td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-player">
                        <span>Vũ Đoàn Nam Thu</span>
                    </td>
                    <td class="match-race">7</td>
                    <td class="match-race">W1-1</td>
                    <td class="match-race">#17</td>
                    <td class="match-race">#32</td>
                    <td class="match-time">
                        <div>11:00 - 12:00</div>
                        <div>22/02/2024</div>
                    </td>
                    <td class="match-status">
                        Kết thúc
                    </td>
                    <td class="match-status">
                        <button class="edit-btn">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td class="match-number">1</td>
                    <td class="match-table">Bàn 1</td>
                    <td class="match-race">2</td>
                    <td class="match-player justify-content-end">
                        <span class="m-0">Nam Vũ</span>
                    </td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-score text-center">5</td>
                    <td class="match-vs text-center">vs.</td>
                    <td class="match-score text-center">5</td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-player">
                        <span>Vũ Đoàn Nam Thu</span>
                    </td>
                    <td class="match-race">7</td>
                    <td class="match-race">W1-1</td>
                    <td class="match-race">#17</td>
                    <td class="match-race">#32</td>
                    <td class="match-time">
                        <div>11:00 - 12:00</div>
                        <div>22/02/2024</div>
                    </td>
                    <td class="match-status">
                        Chưa mở
                    </td>
                    <td class="match-status">
                        <button class="edit-btn">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
                <!-- class isPlaying đổi màu row -->
                <tr class="isPlaying">
                    <td class="match-number">1</td>
                    <td class="match-table">Bàn 1</td>
                    <td class="match-race">2</td>
                    <td class="match-player justify-content-end">
                        <span class="m-0">Nam Vũ</span>
                    </td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-score text-center">5</td>
                    <td class="match-vs text-center">vs.</td>
                    <td class="match-score text-center">5</td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-player">
                        <span>Vũ Đoàn Nam Thu</span>
                    </td>
                    <td class="match-race">7</td>
                    <td class="match-race">W1-1</td>
                    <td class="match-race">#17</td>
                    <td class="match-race">#32</td>
                    <td class="match-time">
                        <div>11:00 - 12:00</div>
                        <div>22/02/2024</div>
                    </td>
                    <td class="match-status">
                        Đang chơi
                    </td>
                    <td class="match-status">
                        <button class="edit-btn">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="match-list">
        <div class="round-name">Vòng 1</div>
        <div class="table-overflow">
            <table class="round-table">
                <tr>
                    <th class="text-center">#</th>
                    <th>Bàn</th>
                    <th class="text-center">Trận</th>
                    <th colspan="7" class="text-center">Kết quả</th>
                    <th class="text-center">Chạm</th>
                    <th class="text-center">Mã trận</th>
                    <th class="text-center">Thắng</th>
                    <th class="text-center">Thua</th>
                    <th class="text-center">Thời gian</th>
                    <th class="text-center">Trạng thái</th>
                    <th class="text-center">Hành động</th>
                </tr>
                <!-- class isPlaying đổi màu row -->
                <tr class="isPlaying">
                    <td class="match-number">1</td>
                    <td class="match-table">Bàn 1</td>
                    <td class="match-race">2</td>
                    <td class="match-player justify-content-end">
                        <span class="m-0">Nam Vũ</span>
                    </td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-score text-center">5</td>
                    <td class="match-vs text-center">vs.</td>
                    <td class="match-score text-center">5</td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-player">
                        <span>Vũ Đoàn Nam Thu</span>
                    </td>
                    <td class="match-race">7</td>
                    <td class="match-race">W1-1</td>
                    <td class="match-race">#17</td>
                    <td class="match-race">#32</td>
                    <td class="match-time">
                        <div>11:00 - 12:00</div>
                        <div>22/02/2024</div>
                    </td>
                    <td class="match-status">
                        Đang chơi
                    </td>
                    <td class="match-status">
                        <button class="edit-btn">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
                <!-- class isFinish đổi màu row -->
                <tr class="isFinish">
                    <td class="match-number">1</td>
                    <td class="match-table">Bàn 1</td>
                    <td class="match-race">2</td>
                    <td class="match-player justify-content-end">
                        <span class="m-0">Nam Vũ</span>
                    </td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-score text-center">5</td>
                    <td class="match-vs text-center">vs.</td>
                    <td class="match-score text-center">5</td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-player">
                        <span>Vũ Đoàn Nam Thu</span>
                    </td>
                    <td class="match-race">7</td>
                    <td class="match-race">W1-1</td>
                    <td class="match-race">#17</td>
                    <td class="match-race">#32</td>
                    <td class="match-time">
                        <div>11:00 - 12:00</div>
                        <div>22/02/2024</div>
                    </td>
                    <td class="match-status">
                        Kết thúc
                    </td>
                    <td class="match-status">
                        <button class="edit-btn">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td class="match-number">1</td>
                    <td class="match-table">Bàn 1</td>
                    <td class="match-race">2</td>
                    <td class="match-player justify-content-end">
                        <span class="m-0">Nam Vũ</span>
                    </td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-score text-center">5</td>
                    <td class="match-vs text-center">vs.</td>
                    <td class="match-score text-center">5</td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-player">
                        <span>Vũ Đoàn Nam Thu</span>
                    </td>
                    <td class="match-race">7</td>
                    <td class="match-race">W1-1</td>
                    <td class="match-race">#17</td>
                    <td class="match-race">#32</td>
                    <td class="match-time">
                        <div>11:00 - 12:00</div>
                        <div>22/02/2024</div>
                    </td>
                    <td class="match-status">
                        Chưa mở
                    </td>
                    <td class="match-status">
                        <button class="edit-btn">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
                <!-- class isPlaying đổi màu row -->
                <tr class="isPlaying">
                    <td class="match-number">1</td>
                    <td class="match-table">Bàn 1</td>
                    <td class="match-race">2</td>
                    <td class="match-player justify-content-end">
                        <span class="m-0">Nam Vũ</span>
                    </td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-score text-center">5</td>
                    <td class="match-vs text-center">vs.</td>
                    <td class="match-score text-center">5</td>
                    <td class="match-img">
                        <img src="~/images/VietNamFlag.png" alt="">
                    </td>
                    <td class="match-player">
                        <span>Vũ Đoàn Nam Thu</span>
                    </td>
                    <td class="match-race">7</td>
                    <td class="match-race">W1-1</td>
                    <td class="match-race">#17</td>
                    <td class="match-race">#32</td>
                    <td class="match-time">
                        <div>11:00 - 12:00</div>
                        <div>22/02/2024</div>
                    </td>
                    <td class="match-status">
                        Đang chơi
                    </td>
                    <td class="match-status">
                        <button class="edit-btn">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
<div class="match-display d-flex justify-content-center align-items-center d-none">
    <div class="match-detail ">
        <div class="match-header d-flex justify-content-between">
            <div class="match-title">
                <span>Match 15</span>
                <span>(W1-1)</span>
            </div>
            <div class="match-close">
                <i class="fa-solid fa-xmark"></i>
            </div>
        </div>
        <div class="d-flex justify-content-between align-items-center">
            <div class="match-time">
                <span>13:20</span>
                <span> - 14:20</span>
                <span>22/02/2024</span>
            </div>
            <div class="match-complete">Đã xong</div>
        </div>
        <div class="details-body mt-2">
            <div class="edit-score">
                <div class="player-score first">
                    <div class="player-header" style="width: 200px;">
                        Nguời chơi
                    </div>
                    <div class="player-header text-center" style="width: 80px;">
                        Điểm
                    </div>
                    <div class="player-header text-center" style="width: 120px;">
                        Trạng thái
                    </div>
                </div>
                <div class="player-score lose mt-2">
                    <div class="player-name">
                        <img src="~/images/VietNamFlag.png" alt="">
                        <span>Nam Vu Doan Thu</span>
                    </div>
                    <div class="player-point">
                        <input type="number" min="0" value="0">
                    </div>
                    <div class="player-status">
                        <select>
                            <option value="0">Không</option>
                            <option value="1">Bỏ giải</option>
                            <option value="2">Bỏ trận</option>
                            <option value="3">Thắng</option>
                        </select>
                    </div>
                </div>
                <div class="player-score win mt-2">
                    <div class="player-name">
                        <img src="~/images/VietNamFlag.png" alt="">
                        <span>Nam Vu Doan Thu</span>
                    </div>
                    <div class="player-point">
                        <input type="number" min="0" value="0">
                    </div>
                    <div class="player-status">
                        <select>
                            <option value="0">Không</option>
                            <option value="1">Bỏ giải</option>
                            <option value="2">Bỏ trận</option>
                            <option value="3">Thắng</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="edit-table mt-4 d-flex">
                <div>
                    <div class="d-flex align-items-center">
                        <div class="table-header">Mở bàn</div>
                        <div class="table-name open-table">
                            Chọn bàn
                            <!-- <div class="search-box">
                                <input type="text">
                                <div class="player-name">
                                    <span>Bàn 1</span>
                                </div>
                                <div class="player-name">
                                    <span>Bàn 2</span>
                                </div>
                                <div class="player-name">
                                    <span>Bàn 3</span>
                                </div>
                            </div> -->
                        </div>
                    </div>
                    <div class="d-flex align-items-center" style="margin-top: 10px;">
                        <div class="table-header">Lên lịch bàn</div>
                        <div class="table-name schedule-table">
                            Chọn bàn
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-center">
                <div class="save-btn">
                    Lưu
                </div>
            </div>
            <div class="score-board d-flex align-items-end ">
                <div class="name-board">
                    <div class="board-line"><span>Nam Vũ</span></div>
                    <div><span>Quảng Vũ</span></div>
                </div>
                <div class="general-score">
                    <div class="board-line px-2"><span>Điểm</span></div>
                    <div class="text-center board-line"><span>6</span></div>
                    <div class="text-center"><span>3</span></div>
                </div>
                <div class="detail-score">
                    <div class="round-score board-line"><span>1</span></div>
                    <div class="board-line"><span><i class="fa-solid fa-xmark"></i></span></div>
                    <div><span>&nbsp;</span></div>
                </div>
                <div class="detail-score">
                    <div class="round-score board-line"><span>2</span></div>
                    <div class="board-line"><span>&nbsp;</span></div>
                    <div><span><i class="fa-solid fa-xmark"></i></span></div>
                </div>
                <div class="detail-score">
                    <div class="round-score board-line"><span>3</span></div>
                    <div class="board-line"><span><i class="fa-solid fa-xmark"></i></span></div>
                    <div><span>&nbsp;</span></div>
                </div>
                <div class="detail-score">
                    <div class="round-score board-line"><span>4</span></div>
                    <div class="board-line"><span><i class="fa-solid fa-xmark"></i></span></div>
                    <div><span>&nbsp;</span></div>
                </div>
                <div class="detail-score">
                    <div class="round-score board-line"><span>5</span></div>
                    <div class="board-line"><span>&nbsp;</span></div>
                    <div><span><i class="fa-solid fa-xmark"></i></span></div>
                </div>
                <div class="detail-score">
                    <div class="round-score board-line"><span>6</span></div>
                    <div class="board-line"><span><i class="fa-solid fa-xmark"></i></span></div>
                    <div><span>&nbsp;</span></div>
                </div>
                <div class="detail-score">
                    <div class="round-score board-line"><span>7</span></div>
                    <div class="board-line"><span><i class="fa-solid fa-xmark"></i></span></div>
                    <div><span>&nbsp;</span></div>
                </div>
                <div class="detail-score">
                    <div class="round-score board-line"><span>8</span></div>
                    <div class="board-line"><span>&nbsp;</span></div>
                    <div><span><i class="fa-solid fa-xmark"></i></span></div>
                </div>
                <div class="detail-score">
                    <div class="round-score board-line"><span>9</span></div>
                    <div class="board-line"><span><i class="fa-solid fa-xmark"></i></span></div>
                    <div><span>&nbsp;</span></div>
                </div>
                <div class="detail-score">
                    <div class="round-score board-line"><span>10</span></div>
                    <div class="board-line"><span>&nbsp;</i></span></div>
                    <div><span>&nbsp;</span></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    //Handle click choose table
    const matchDisplay = document.querySelector('.match-display');
    const openTable = document.querySelector('.open-table');
    const scheduleTable = document.querySelector('.schedule-table');

    openTable.addEventListener('click', onOffSearchBox);
    scheduleTable.addEventListener('click', onOffSearchBox);

    function onOffSearchBox() {
        if (this.querySelector('.search-box') === null) {
            removeSearchBox();
            this.appendChild(createSearchBox());
        } else {
            removeSearchBox();
        }
    }

    function createSearchBox() {
        var searchBox = document.createElement('div');
        searchBox.classList.add('search-box');

        var input = document.createElement('input');
        input.setAttribute('type', 'text');
        input.addEventListener('click', handleInput);
        searchBox.appendChild(input);

        for (var i = 0; i < 3; i++) {
            var playerContainer = document.createElement('div');
            playerContainer.classList.add('player-name');

            var span = document.createElement('span');
            span.textContent = 'Bàn' + (i + 1);
            playerContainer.appendChild(span);

            searchBox.appendChild(playerContainer);
            searchBox.addEventListener('click', (e) => {
                e.stopPropagation();
                removeSearchBox();
            })
        }

        return searchBox;
    }

    //Handle input
    function handleInput(e) {
        e.stopPropagation();
    }

    function removeSearchBox() {
        const searchBox = document.querySelector('.search-box');
        if (searchBox !== null) {
            searchBox.remove();
        }
    }

    //close popup
    const popup = document.querySelector('.match-close');
    popup.addEventListener('click', () => {
        matchDisplay.classList.add('d-none');
    })

    //open popup
    const editBtnList = document.querySelectorAll('.edit-btn');
    editBtnList.forEach(element => {
        element.addEventListener('click', () => {
            matchDisplay.classList.remove('d-none');
        })
    });
</script>